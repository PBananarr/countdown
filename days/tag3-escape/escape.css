/* ============= escape.css ============= */
:root{
  /* Stimmung: kaltes Nachtblau + dämonisches Rot */
  --bg:#07090f;
  --panel:#0f1523;
  --edge:#202a44;
  --text:#e8edff;
  --muted:#9aaccc;
  --accent:#e11d48; /* Blut */
  --cold:#6ea8ff;
  --shadow:0 22px 60px rgba(0,0,0,.45);

  /* Typo-Skalen */
  --fz-body: clamp(1rem, 0.92rem + 0.6vw, 1.125rem);
  --fz-h2:   clamp(1.25rem, 1.02rem + 1.2vw, 1.6rem);
  --fz-meter: clamp(.95rem, .88rem + .3vw, 1.05rem);
  --radius: 18px;
}

/* Root-Container */
.escape-root{
  position:relative;
  min-height:60vh;
  padding:14px;
  border:1px solid #131a2a;
  border-radius:var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;

  /* Grundverlauf */
  background:
    radial-gradient(1200px 700px at 80% -10%, rgba(34, 44, 78,.55) 0%, transparent 55%),
    radial-gradient(800px 500px at 10% 110%, rgba(150, 16, 34,.10) 0%, transparent 60%),
    linear-gradient(180deg, #0a0e19 0%, #07090f 60%);
}

/* ===== Bild-Layer (ganz unten) ===== */
.escape-root::before{
  content:"";
  position:absolute; inset:0;
  background: url("./picEscape/escape-bg.png") center/cover no-repeat;
  filter: brightness(.5) contrast(1.05) blur(2px);
  mix-blend-mode: normal;
  opacity: 1;
  z-index:0;
}

/* ===== Vignette + Rauschen ===== */
.escape-root::after{
  content:"";
  position:absolute; inset:-50%;
  pointer-events:none;
  opacity:.06;
  background-image:
    radial-gradient(1px 1px at 25% 13%, #fff 35%, transparent 36%),
    radial-gradient(1px 1px at 11% 19%, #fff 35%, transparent 36%),
    radial-gradient(1px 1px at 72% 77%, #fff 35%, transparent 36%),
    radial-gradient(1px 1px at 44% 53%, #fff 35%, transparent 36%),
    radial-gradient(120vw 120vh at 50% 35%, rgba(0,0,0,0) 40%, rgba(0,0,0,.45) 100%);
  animation: noiseMove 9s linear infinite;
  filter: contrast(120%);
  z-index:1;
}
@keyframes noiseMove{
  to{ transform: translate3d(10%, -8%, 0); }
}

/* Nebel */
.escape-fx,
.escape-fx::before{
  pointer-events:none;
  position:absolute;
  inset:0;
}
.escape-fx::before{
  content:"";
  background:
    radial-gradient(50% 120% at 40% -10%, rgba(180, 28, 56,.06), transparent 60%),
    radial-gradient(60% 150% at 70% 120%, rgba(108, 131, 200,.06), transparent 60%);
  mix-blend-mode: screen;
  animation: fog 18s ease-in-out infinite alternate;
  opacity:.55;
}
@keyframes fog{
  0%  { transform: translate3d(-2%, -1%, 0) scale(1.02); filter: blur(10px); }
  100%{ transform: translate3d(1%,  2%, 0)  scale(1.04); filter: blur(12px); }
}

/* Bildschirmwechsel */
.escape-screen{
  position:relative;
  transform-origin:50% 50%;
  transition: transform .24s ease, opacity .24s ease, filter .24s ease;
}
.escape-screen.leaving{ opacity:.35; transform:translateX(-10px) scale(.985); filter:blur(1px); }
.escape-screen.entering{ opacity:1; transform:translateX(0) }

/* Karte/Room */
.escape-card{
  background: linear-gradient(180deg, rgba(18,26,44,.78), rgba(10,14,22,.82));
  border:1px solid var(--edge);
  border-radius:var(--radius);
  padding:18px;
  box-shadow: var(--shadow);
  overflow:hidden;
  backdrop-filter: blur(3px) saturate(102%);
}

/* Titel */
.escape-card h2{
  margin:.25rem 0 .55rem;
  font-size:var(--fz-h2);
  letter-spacing:.015em;
  text-align:center;
  color:var(--text);
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* Text */
.escape-card p{
  margin:.6rem 0 1rem;
  color:var(--text);
  line-height:1.65;
  opacity:.96;
  font-size: var(--fz-body);
}

/* Choices */
.choice-list{ display:grid; gap:10px; }
.choice{
  appearance:none;
  background: linear-gradient(180deg, #0d1426, #0b1222);
  border:1px solid #1c2948;
  color:var(--text);
  font-weight:700;
  padding:.85rem 1rem;
  border-radius:12px;
  cursor:pointer;
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
  text-align:left;
  font-size: clamp(1.02rem, .98rem + .5vw, 1.1rem);
  letter-spacing:.01em;
  transition: transform .12s ease, border-color .15s ease, box-shadow .15s ease, background .2s ease;
}
.choice:hover{
  border-color:#2b3d6a;
  transform:translateY(-1px);
  box-shadow: 0 10px 28px rgba(0,0,0,.42);
}
.choice:active{ transform:translateY(0); }

/* Fortschritt */
.escape-meter{
  margin-top: .9rem;
  color: var(--muted);
  font-size: var(--fz-meter);
  text-align:center;
  letter-spacing:.02em;
}

/* FX-Layer */
.escape-fx{ position:absolute; inset:0; }

/* ===================== BLOOD (nur roter Tint) ===================== */
.fx-blood{
  position:absolute;
  inset:0;
  background:
    radial-gradient(420px 240px at 70% 30%, rgba(225,29,72,.14), transparent 70%),
    linear-gradient(180deg, rgba(225,29,72,.10), rgba(8,10,16,0) 60%);
  opacity:0;
  transform:scale(1.05);
  transition:opacity .22s ease, transform .22s ease;
  filter:contrast(112%) saturate(112%);
}
.fx-blood.show{ opacity:1; transform:scale(1); }
/* (kein ::after – der „rote Strich“ ist entfernt) */

/* ===================== SCARE (Bild-Pop ersetzt) ===================== */
.fx-scare-img{ display:none !important; }

.fx-scare{
  position:absolute; inset:0;
  opacity:0;
  pointer-events:none;
  z-index:3;
}
.fx-scare.on{
  opacity:1;
  transition: opacity .12s ease;
}
.fx-scare.on .fx-scare-backdrop{
  position:absolute; inset:0;
  background:
    radial-gradient(70vw 70vh at 50% 50%, rgba(140,170,255,.20) 0%, rgba(0,0,0,.7) 65%);
  animation: scareVignette .28s ease forwards;
}
@keyframes scareVignette{
  from{ filter: saturate(115%) contrast(115%); }
  to  { filter: saturate(100%) contrast(100%); }
}
.fx-scare.on::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(60vw 60vh at 50% 50%, rgba(255,255,255,.25), rgba(255,255,255,0) 60%);
  mix-blend-mode: screen;
  animation: scareFlash .18s ease-in forwards;
}
@keyframes scareFlash{
  0%{ opacity:.85; transform: scale(1.05); }
  100%{ opacity:0;   transform: scale(1); }
}
.fx-scare.on::after{
  content:"";
  position:absolute; inset:0;
  background:
    repeating-linear-gradient(180deg,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 1px,
      transparent 2px,
      transparent 3px);
  opacity:.25;
  animation: scanMove .22s linear 1;
}
@keyframes scanMove{
  from{ transform: translateY(-8%); }
  to  { transform: translateY(8%); }
}
.fx-scare-backdrop{ position:absolute; inset:0; }
.fx-scare-img{
  max-width:min(84vw, 540px);
  max-height:min(62vh, 440px);
  object-fit:cover;
  border:3px solid #2a314b;
  border-radius:12px;
  box-shadow:0 30px 90px rgba(0,0,0,.65);
  transform: scale(1.18) rotate(-1deg);
  filter: contrast(120%) saturate(118%);
}

/* ===================== DOOR (Raumwechsel) ===================== */
.fx-door{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  z-index:3;
}
.fx-door.show{
  opacity:1;
  animation: doorFlash .45s ease forwards;
}
/* Türspalt */
.fx-door::before{
  content:"";
  position:absolute;
  left:50%; top:0;
  width:4%;
  height:100%;
  background: linear-gradient(180deg, rgba(190,210,255,.85), rgba(190,210,255,.1));
  transform: translateX(-50%) scaleX(0.2);
  filter: blur(6px);
}
.fx-door.show::before{
  animation: doorBeam .45s ease forwards;
}
/* sanfter Schritt nach vorn */
.escape-screen.dooring{
  animation: doorZoom .45s ease forwards;
}
@keyframes doorFlash{
  0%   { opacity:0; }
  20%  { opacity:1; }
  100% { opacity:0; }
}
@keyframes doorBeam{
  0%   { transform: translateX(-50%) scaleX(0.2); opacity:.9; }
  40%  { transform: translateX(-50%) scaleX(1);   opacity:1; }
  100% { transform: translateX(-50%) scaleX(0.05); opacity:0; }
}
@keyframes doorZoom{
  0%   { transform: scale(1) translateX(0); }
  60%  { transform: scale(1.04) translateX(1px); }
  100% { transform: scale(1) translateX(0); }
}

/* Responsives Feintuning */
@media (min-width:720px){
  .escape-card{ padding:22px; }
}
@media (max-width:480px){
  .escape-root{ padding:12px; }
  .escape-card{ padding:16px; }
  .choice-list{ gap:9px; }
  .choice{ padding:.95rem 1.05rem; }
  .escape-card p{ line-height:1.7; }
}

/* Bewegungsreduktion */
@media (prefers-reduced-motion: reduce){
  .escape-screen,
  .fx-blood,
  .fx-scare.on,
  .escape-root::after,
  .escape-fx::before,
  .fx-door.show,
  .escape-screen.dooring{
    animation: none !important;
    transition: none !important;
  }
}


/* =========================
   TAG 3 – Typo & Card Overrides
   ========================= */

/* Meta-H1 */
.tag-tag3-escape .card > h1{
  margin: .2rem 0 1rem;
  text-align: center;
  font-size: clamp(1.3rem, 1.05rem + 1.6vw, 2rem);
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  color: #e8edff;
  opacity: .95;
  text-shadow:
    0 2px 10px rgba(0,0,0,.55),
    0 0 24px rgba(190, 210, 255, .10);
  position: relative;
}
.tag-tag3-escape .card > h1::after{
  content:"";
  display:block;
  width: clamp(90px, 20vw, 160px);
  height: 3px;
  margin: .55rem auto 0;
  border-radius: 999px;
  background: linear-gradient(90deg, transparent, rgba(225,29,72,.55), transparent);
  box-shadow: 0 0 18px rgba(225,29,72,.35);
}

/* Escape-Karte */
.escape-card{
  background:
    linear-gradient(180deg, rgba(13,16,22,.88), rgba(8,10,14,.92));
  border-color: #272f49;
  backdrop-filter: blur(3px) saturate(100%);
}

/* Raumtitel */
.escape-card h2{
  font-weight: 800;
  letter-spacing: .03em;
  color: #dfe6ff;
  text-shadow:
    0 1px 0 rgba(0,0,0,.35),
    0 0 14px rgba(120,145,210,.10);
  margin: .2rem 0 .6rem;
}

/* Fließtext */
.escape-card p{
  color: rgba(230, 236, 255, .92);
  text-shadow: 0 1px 0 rgba(0,0,0,.28);
  line-height: 1.7;
  opacity: 1;
}

.escape-card p + p{
  margin-top: .6rem;
}

/* Buttons */
.choice{
  background: linear-gradient(180deg, #0c1220, #0a101c);
  border-color: #202a44;
}
.choice:hover{ border-color: #2a3a63; }

/* Fortschrittsanzeige */
.escape-meter{ color: #9fb0d2; }


/* ===== Escape Badge Modal ===== */
#escape-badge-modal {
  border: 1px solid var(--edge);
  background: rgba(7, 9, 15, .9);
  color: var(--text);
  border-radius: 16px;
  padding: 0;
  width: min(92vw, 560px);
  box-shadow: 0 24px 80px rgba(0,0,0,.55);
}

#escape-badge-modal::backdrop {
  background: radial-gradient(120vw 120vh at 50% 50%, rgba(0,0,0,.45), rgba(0,0,0,.85));
  backdrop-filter: blur(2px);
}

.badge-card { padding: 14px; }

.badge-frame {
  overflow: hidden;
  border: 1px solid var(--edge);
  border-radius: 14px;
  background: #0b0f19;
}

#escape-badge-img {
  display: block;
  width: 100%;
  height: auto;
  opacity: .75;
  filter: contrast(105%) saturate(110%) brightness(.9);
  border-radius: 12px;
}

/* Düsterer Text unterhalb */
.badge-text {
  margin-top: 1rem;
  text-align: center;
  display: grid;
  gap: .3rem;
}

.badge-text .t1 {
  font-weight: 800;
  font-size: clamp(1.3rem, 1rem + 2vw, 2rem);
  color: #d4d4d4;
  letter-spacing: .04em;
  text-shadow:
    0 2px 6px rgba(0,0,0,.7),
    0 0 14px rgba(120,0,0,.25);
  font-style: italic;
}

.badge-text .t2 {
  font-weight: 600;
  font-size: clamp(.95rem, .85rem + 1vw, 1.3rem);
  color: #a3a3a3;
  opacity: .85;
  letter-spacing: .03em;
  text-shadow: 0 1px 5px rgba(0,0,0,.6);
}

.badge-actions {
  display: flex;
  justify-content: flex-end;
  gap: .5rem;
  margin-top: .6rem;
}

#escape-badge-close.btn {
  background: linear-gradient(180deg,#2a5fff,#1e40af);
  border-color: #284b92;
}
